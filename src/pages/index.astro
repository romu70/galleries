---
import { getCollection } from "astro:content";
import Page from '../layouts/Page.astro';
import Date from '../components/Date.astro';
import Location from '../components/Location.astro';
import { Debug } from 'astro:components';
import { Image } from 'astro:assets';

const allFonts = await getCollection("fonts");

---

<Page>
  <!-- <h1>The current URL is: {Astro.url}</h1>
  <h1>The current URL pathname is: {Astro.url.pathname}</h1>
  <h1>The current URL origin is: {Astro.url.origin}</h1> -->
	<div class="fonts">
    {
      allFonts.map((font) => (

        // <Debug {font} />

//TODO: thème graphique        

        <div class="font">
          <div class="thumb" id={'thumb-' + font.slug} data-slug={font.slug} >
            <Image src={font.data.image.file} alt={font.data.image.alt} />
          </div>
          <div class="overlay" id={'overlay-' + font.slug}>
            <span class="close" data-slug={font.slug} >✖</span>
            <Image src={font.data.image.file} alt={font.data.image.alt} />
          </div>
        </div>
      ))
    }
  </div>
  <script>
    // Get all labels
    const thumbs = document.querySelectorAll('div[data-slug]');
    var open = null;

    // Handle clicks on each label.
    thumbs.forEach((thumb) => {
      thumb.addEventListener('click', () => {
        if(open !== null) {
          document.getElementById(open).style.display = 'none';
        }
        open = 'overlay-' + thumb.dataset.slug;
        document.getElementById(open).style.display = 'flex';
      });
    });

    // Get all close button
    const closes = document.querySelectorAll('span[data-slug]');
    // Handle clicks on each button.
    closes.forEach((close) => {
      close.addEventListener('click', () => {
        document.getElementById(open).style.display = 'none';
        open = null;
      });
    });
  </script>
</Page>
