---
import { getCollection } from "astro:content";
import Page from '../layouts/Page.astro';
import Date from '../components/Date.astro';
import Location from '../components/Location.astro';
import { Debug } from 'astro:components';
import { Image } from 'astro:assets';

const allFonts = await getCollection("fonts");

function toto() {
  console.log('toto');
}

---

<Page>
  <!-- <h1>The current URL is: {Astro.url}</h1>
  <h1>The current URL pathname is: {Astro.url.pathname}</h1>
  <h1>The current URL origin is: {Astro.url.origin}</h1> -->
	<div class="fonts">
    {
      allFonts.map((font) => (

        // <Debug {font} />
            
        <div class="font">
          <label class="font" id={'label-' + font.slug} >
            <Image src={font.data.image.file} alt={font.data.image.alt} />
          </label>
          <div class="overlay" id={'overlay-' + font.slug}>
            <span class="close" id={'closeBtn-' + font.slug} >âœ–</span>
            <Image src={font.data.image.file} alt={font.data.image.alt} />
          </div>
        </div>
                
        // <div class="font">
        //   <div class="metadata">
        //     <Date date={font.data.pubDate} />
        //     <div class="place">
        //       {font.data.location}
        //     </div>
        //     <Location latitude={font.data.latitude} longitude={font.data.longitude} />
        //   </div>
          
        //   <Image src={font.data.image.file} alt={font.data.image.alt} />
        // </div>
      ))
    }
  </div>
  <script>
    // Get all labels
    const labels = document.querySelectorAll('label.font');

    // Handle clicks on each label.
    labels.forEach((label) => {
      let id = label.id.replace("label-", "");

      label.addEventListener('click', () => {
        document.getElementById('overlay-' + id).style.display = 'flex';
      });
    });

    // Get all close button
    const closes = document.querySelectorAll('span.close');
    // Handle clicks on each button.
    closes.forEach((close) => {
      let id = close.id.replace("closeBtn-", "");

      close.addEventListener('click', () => {
        document.getElementById('overlay-' + id).style.display = 'none';
      });
    });
  </script>
</Page>
